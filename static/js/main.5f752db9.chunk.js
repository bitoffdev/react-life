(this["webpackJsonpreact-life"]=this["webpackJsonpreact-life"]||[]).push([[0],{66:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a=n(5),c=n(0),l=n.n(c),r=n(18),i=n.n(r),s=(n(66),n(30)),o=n.n(s),u=n(38),j=n(10),h=n(87),d=n(88),b=n(84),f=n(86),v=n(83),O=n(58),x=n(59),g=n(54),p=n(60),m=n(50),C=n(55),y=n(56),w=function(){function e(){Object(C.a)(this,e),this.livingCells=void 0,this.livingCells=new Set}return Object(y.a)(e,[{key:"getCell",value:function(e,t){return this.livingCells.has("".concat(e,":").concat(t))}},{key:"flipCell",value:function(e,t){var n="".concat(e,":").concat(t);this.livingCells.has(n)?this.livingCells.delete(n):this.livingCells.add(n)}},{key:"setCell",value:function(e,t,n){var a="".concat(e,":").concat(t);n?this.livingCells.add(a):this.livingCells.delete(a)}},{key:"countLivingNeighbors",value:function(e,t){for(var n=0,a=e-1;a<=e+1;a++)for(var c=t-1;c<=t+1;c++)n+=this.getCell(a,c)?1:0;return n}},{key:"loadText",value:function(e){this.livingCells=new Set;var t,n=0,a=0,c=0,l=0,r=0,i=0,s=1,o=Object(m.a)(e.split("\n"));try{for(o.s();!(t=o.n()).done;){var u=t.value;if(!(u.length>=1&&"#"===u[0])){var h=u.split(",");if(h.length>1){var d,b=Object(m.a)(h);try{for(b.s();!(d=b.n()).done;){var f=d.value.split("=").map((function(e){return e.trim()}));2===f.length&&("x"===f[0]&&(n=parseInt(f[1]),c=-Math.floor(n/2)),"y"===f[0]&&(a=parseInt(f[1]),l=-Math.floor(a/2)))}}catch(C){b.e(C)}finally{b.f()}}else{var v=u.match(/[0-9]+|b|o|\$/gm);if(!v)continue;var O,x=Object(m.a)(v.entries());try{for(x.s();!(O=x.n()).done;){var g=Object(j.a)(O.value,2)[1];if("b"===g)r+=s,s=1;else if("o"===g){for(var p=r;p<r+s;p++)this.setCell(c+p,l+i,!0);r+=s,s=1}else"$"===g?(i+=s,r=0,s=1):s=parseInt(g)}}catch(C){x.e(C)}finally{x.f()}}}}}catch(C){o.e(C)}finally{o.f()}}},{key:"loadBlob",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return n.loadText(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=this,t=new Map,n=function(e,n,a){var c;return t.set("".concat(e,":").concat(n),(null!==(c=t.get("".concat(e,":").concat(n)))&&void 0!==c?c:0)+a)};this.livingCells.forEach((function(e){var t=e.split(":").map((function(e){return parseInt(e)})),a=Object(j.a)(t,2),c=a[0],l=a[1];n(c,l,0);for(var r=-1;r<2;r++)for(var i=-1;i<2;i++)0===r&&0===i||n(c+r,l+i,1)})),t.forEach((function(t,n){switch(t){case 2:break;case 3:e.livingCells.add(n);break;case 0:case 1:case 4:case 5:case 6:case 7:case 8:e.livingCells.delete(n);break;default:console.error("Unexpected count of neighbors: ".concat(t," for coordinate ").concat(n))}}))}}]),e}(),k=n(57),S=function(e,t,n){if(t){var a=e.current,c=null===a||void 0===a?void 0:a.getContext("2d");if(null!=c)for(var l=c.canvas.width,r=c.canvas.height,i=Math.max(1,Math.floor(l/n)),s=Math.max(1,Math.floor(r/n)),o=-Math.floor(i/2),u=-Math.floor(s/2),j=u;j<=u+s;j++)for(var h=o;h<=o+i;h++)c.fillStyle=t.getCell(h,j)?"rgb(0,0,0)":"rgb(255,255,255)",c.fillRect((h-o)*n,(j-u)*n,n,n)}};function I(e){var t=e.cellPixelWidth,n=Object(c.useState)(null),l=Object(j.a)(n,2)[1],r=Object(c.useRef)(null),i=Object(c.useState)({width:200,height:200}),s=Object(j.a)(i,2),o=s[0],u=s[1],h=Object(k.a)({onResize:function(e){return u(e)}}).ref;return Object(c.useEffect)((function(){return S(r,e.game,t)}),[t,e.game,o]),Object(c.useEffect)((function(){return l((function(t){return t&&clearInterval(t),null!=e.game&&e.isRunning?setInterval((function(){var t;null===(t=e.game)||void 0===t||t.next(),S(r,e.game,e.cellPixelWidth)}),e.intervalMillis):null}))}),[r,e]),Object(a.jsx)("div",{className:e.className,ref:h,style:{maxWidth:"100%",overflow:"hidden",minHeight:"100px",flex:1},children:Object(a.jsx)("canvas",{ref:r,width:o.width,height:o.height})})}var L=n(85);function M(e){var t=Object(c.useState)(null),n=Object(j.a)(t,2),l=n[0],r=n[1],i=Object(c.useRef)(null);return Object(a.jsxs)(L.a,{show:e.show,onHide:e.onClose,children:[Object(a.jsx)(L.a.Header,{closeButton:!0,children:Object(a.jsx)(L.a.Title,{children:"Modal heading"})}),Object(a.jsx)(L.a.Body,{children:Object(a.jsx)(f.a,{children:Object(a.jsx)(f.a.File,{id:"custom-file",label:null!==l&&void 0!==l?l:"Choose File",ref:i,onChange:function(){return function(){var e=i.current;if(e&&null!=e.files&&0!==e.files.length){var t=e.files[0];r(t.name)}}()},custom:!0})})}),Object(a.jsxs)(L.a.Footer,{children:[Object(a.jsx)(x.a,{variant:"secondary",onClick:e.onClose,children:"Close"}),Object(a.jsx)(x.a,{variant:"primary",onClick:function(){return function(){var t=i.current;if(t&&null!=t.files&&0!==t.files.length){var n=t.files[0];e.loadBlob(n.slice())}}()},children:"Save Changes"})]})]})}var F=n(81),R=n(82);function B(e){var t=Object(c.useState)(!1),n=Object(j.a)(t,2),l=n[0],r=n[1],i=Object(c.useState)(null),s=Object(j.a)(i,2),o=s[0],u=s[1],h=Object(c.useState)(""),d=Object(j.a)(h,2),b=d[0],v=d[1],O=Object(c.useRef)(null),g=function(t,n){u(null),r(!0),fetch(n?"http://cors-anywhere.herokuapp.com/".concat(t):t).then((function(e){return e.blob()})).then(e.loadBlob).catch((function(e){u(e.message)})).finally((function(){return r(!1)}))};return Object(a.jsxs)(L.a,{show:e.show,onHide:e.onClose,children:[Object(a.jsx)(L.a.Header,{closeButton:!0,children:Object(a.jsx)(L.a.Title,{children:"Load Game from URL"})}),Object(a.jsxs)(L.a.Body,{children:[o&&Object(a.jsxs)(F.a,{variant:"danger",children:[o,Object(a.jsx)("br",{}),Object(a.jsx)(F.a.Link,{onClick:function(){var e,t;return g(null!==(e=null===(t=O.current)||void 0===t?void 0:t.value)&&void 0!==e?e:"",!0)},children:"Click here to again with CORS Anywhere (Insecure)."})]}),Object(a.jsx)(f.a,{children:Object(a.jsxs)(f.a.Group,{controlId:"exampleForm.ControlInput1",children:[Object(a.jsx)(f.a.Label,{children:"URL"}),Object(a.jsx)(f.a.Control,{type:"text",placeholder:"http://example.org",ref:O,value:b,onChange:function(e){return v(e.target.value)}})]})}),Object(a.jsx)(x.a,{href:"#",onClick:function(){return v("/api/v1/objects/r-pentamino.rle")},children:"Example 1"})]}),Object(a.jsxs)(L.a.Footer,{children:[Object(a.jsx)(x.a,{variant:"secondary",onClick:e.onClose,children:"Close"}),Object(a.jsx)(x.a,{variant:"primary",onClick:function(){var e,t;return g(null!==(e=null===(t=O.current)||void 0===t?void 0:t.value)&&void 0!==e?e:"",!1)},disabled:l,children:l?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(R.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),Object(a.jsx)("span",{style:{marginLeft:"5px"},children:"Loading..."})]}):"Load URL"})]})]})}var T=function(){var e=Object(c.useState)(null),t=Object(j.a)(e,2),n=t[0],l=t[1],r=Object(c.useState)(50),i=Object(j.a)(r,2),s=i[0],m=i[1],C=Object(c.useState)(100),y=Object(j.a)(C,2),k=y[0],S=y[1],L=Object(c.useState)(!1),F=Object(j.a)(L,2),R=F[0],T=F[1],P=Object(c.useState)(!1),E=Object(j.a)(P,2),N=E[0],A=E[1],H=Object(c.useState)(!1),U=Object(j.a)(H,2),G=U[0],W=U[1],z=function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!1),W(!1),n=new w,e.next=5,n.loadBlob(t);case 5:T(!1),l(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(M,{show:N,loadBlob:z,onClose:function(){return A(!1)}}),Object(a.jsx)(B,{show:G,loadBlob:z,onClose:function(){return W(!1)}}),Object(a.jsxs)("div",{className:"d-flex flex-column",children:[Object(a.jsxs)(h.a,{bg:"light",expand:"lg",children:[Object(a.jsx)(h.a.Brand,{href:"#home",children:"React-Life"}),Object(a.jsx)(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsxs)(h.a.Collapse,{id:"basic-navbar-nav",children:[Object(a.jsxs)(d.a,{className:"mr-auto",children:[Object(a.jsx)(b.a,{title:"Examples",id:"basic-nav-dropdown",children:Object(a.jsx)(b.a.Item,{onClick:function(){var e=new w;e.setCell(2,2,!0),e.setCell(3,2,!0),e.setCell(2,3,!0),e.setCell(1,3,!0),e.setCell(2,4,!0),T(!1),l(e)},children:"R-Pentamino"})}),Object(a.jsxs)(b.a,{title:"Load",id:"basic-nav-dropdown",children:[Object(a.jsx)(b.a.Item,{onClick:function(){return W(!0)},children:"From URL"}),Object(a.jsx)(b.a.Item,{onClick:function(){return A(!0)},children:"From File"})]})]}),Object(a.jsxs)(f.a,{inline:!0,children:[Object(a.jsxs)(v.a,{className:"mr-sm-2",children:[Object(a.jsx)(v.a.Prepend,{children:Object(a.jsx)(v.a.Text,{id:"btnGroupAddon2",children:"Cell Size"})}),Object(a.jsx)(O.a,{type:"number",onChange:function(e){m(Math.max(1,parseInt(e.target.value)))},value:s}),Object(a.jsx)(v.a.Append,{children:Object(a.jsx)(v.a.Text,{children:"px"})})]}),Object(a.jsxs)(v.a,{className:"mr-sm-2",children:[Object(a.jsx)(v.a.Prepend,{children:Object(a.jsx)(v.a.Text,{id:"btnGroupAddon2",children:Object(a.jsx)(g.a,{icon:p.a})})}),Object(a.jsx)(O.a,{type:"number",onChange:function(e){var t;T(!1),S((t=e.target.value,Math.max(1,parseInt(t))))},value:k}),Object(a.jsx)(v.a.Append,{children:Object(a.jsx)(v.a.Text,{children:"ms"})})]}),Object(a.jsx)(x.a,{onClick:function(){return T((function(e){return!e}))},variant:R?"outline-danger":"outline-success",children:R?"Pause":"Start"})]})]})]}),Object(a.jsx)(I,{cellPixelWidth:s,game:n,intervalMillis:k,isRunning:R})]})]})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,89)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,l=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),l(e),r(e)}))};n(75);i.a.render(Object(a.jsx)(l.a.StrictMode,{children:Object(a.jsx)(T,{})}),document.getElementById("root")),P()}},[[76,1,2]]]);
//# sourceMappingURL=main.5f752db9.chunk.js.map